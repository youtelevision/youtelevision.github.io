<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>YouTV</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background-color: #111;
      color: #fff;
      margin: 0;
      padding: 0;
    }
    header {
      padding: 1em;
      background-color: #202020;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }
    input[type="text"] {
      width: 60%;
      padding: 0.5em;
      font-size: 1em;
      border: none;
      border-radius: 5px;
    }
    button {
      padding: 0.5em 1em;
      margin-left: 10px;
      background-color: #FF0000;
      color: white;
      border: none;
      border-radius: 5px;
      cursor: pointer;
    }
    .videos {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
      gap: 1em;
      padding: 1em;
    }
    .video {
      background-color: #181818;
      padding: 1em;
      border-radius: 8px;
    }
    .video iframe {
      width: 100%;
      height: 200px;
      border-radius: 5px;
    }
    .video h4 {
      margin: 0.5em 0 0;
    }
  </style>
</head>
<body>

<header>
  <h1>YouTV</h1>
  <div>
    <input type="text" id="searchInput" placeholder="Search YouTube...">
    <button onclick="searchVideos()">Search</button>
  </div>
</header>

<main class="videos" id="videoContainer">Loading videos...</main>

<script>
const API_KEY = 'AIzaSyDeI8KBaKlngQuTycPDCu4uC6ogNuTVLAs';
const videoContainer = document.getElementById('videoContainer');

function createVideoCard(video) {
  const videoId = video.id.videoId || video.id;
  const title = video.snippet.title;
  const channel = video.snippet.channelTitle;
  const iframe = `<iframe src="https://www.youtube.com/embed/${videoId}" frameborder="0" allowfullscreen></iframe>`;
  return `
    <div class="video">
      ${iframe}
      <h4>${title}</h4>
      <p>by ${channel}</p>
    </div>
  `;
}

async function searchVideos() {
  const query = document.getElementById('searchInput').value;
  if (!query) return;
  videoContainer.innerHTML = 'Searching...';

  try {
    const response = await fetch(`https://www.googleapis.com/youtube/v3/search?part=snippet&type=video&maxResults=12&q=${encodeURIComponent(query)}&key=${API_KEY}`);
    const data = await response.json();

    if (data.items && data.items.length > 0) {
      displayVideos(data.items);
    } else {
      videoContainer.innerHTML = '<p>No videos found.</p>';
    }
  } catch (error) {
    console.error('Search error:', error);
    videoContainer.innerHTML = '<p>Error loading search results.</p>';
  }
}

async function loadPopularVideos() {
  videoContainer.innerHTML = 'Loading recommended videos...';
  try {
    const response = await fetch(`https://www.googleapis.com/youtube/v3/videos?part=snippet&chart=mostPopular&maxResults=12&regionCode=US&key=${API_KEY}`);
    const data = await response.json();

    if (data.items && data.items.length > 0) {
      displayVideos(data.items);
    } else {
      videoContainer.innerHTML = '<p>No recommended videos found.</p>';
    }
  } catch (error) {
    console.error('Recommendation error:', error);
    videoContainer.innerHTML = '<p>Error loading recommended videos.</p>';
  }
}

function displayVideos(videos) {
  videoContainer.innerHTML = videos.map(createVideoCard).join('');
}

// Load popular videos on page load
loadPopularVideos();
</script>

</body>
</html>
